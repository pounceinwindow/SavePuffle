<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GravityFalls.Client.Pages.GamePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Ð˜Ð³Ñ€Ð°">

    <Grid StyleClass="parchment">
        <Image Source="wood_bg.png" Aspect="AspectFill" />
        <BoxView Opacity="0.18" BackgroundColor="Black" />

        <Grid Padding="16" RowDefinitions="Auto,*" RowSpacing="12">
            <!-- Header -->
            <Border Stroke="#B8935E" StrokeThickness="3" StrokeShape="RoundRectangle 18" BackgroundColor="#F6E7C6" StyleClass="panel">
                <Border.Shadow>
                    <Shadow Opacity="0.45" Radius="18" Offset="0,8" />
                </Border.Shadow>

                <Grid Padding="14" ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" RowSpacing="4">
                    <VerticalStackLayout Spacing="2">
                        <Label Text="Ð¡ÐŸÐÐ¡Ð¢Ð˜ ÐŸÐ£Ð¥Ð›Ð®" StyleClass="h1" />
                        <Label x:Name="MeLabel" Text="Ð’Ñ‹: ..." StyleClass="small-muted" />
                    </VerticalStackLayout>

                    <Button x:Name="LeaveButton" Grid.Column="1" Text="Ð’Ñ‹Ð¹Ñ‚Ð¸" StyleClass="chip" />

                    <Label x:Name="TurnLabel" Grid.Row="1" Grid.ColumnSpan="2" Text="ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ..." TextColor="#2B1B12" FontAttributes="Bold" />
                </Grid>
            </Border>

            <!-- Body -->
            <Grid Grid.Row="1" ColumnDefinitions="*,12,320" RowDefinitions="*">

                <!-- Board -->
                <Border Grid.Column="0" Stroke="#B8935E" StrokeThickness="3" StrokeShape="RoundRectangle 18" BackgroundColor="#F6E7C6" StyleClass="panel">
                    <Border.Shadow>
                        <Shadow Opacity="0.35" Radius="16" Offset="0,6" />
                    </Border.Shadow>

                    <Grid Padding="12" RowDefinitions="Auto,*" RowSpacing="10">
                        <Label Text="ÐŸÐ¾Ð»Ðµ (0 â†’ 30)" StyleClass="h2" />

                        <ScrollView Grid.Row="1" Orientation="Both">
                            <Grid>
                                <!-- Cells + pawns are built in code-behind -->
                                <AbsoluteLayout x:Name="BoardAbs" />
                            </Grid>
                        </ScrollView>
                    </Grid>
                </Border>

                <!-- Sidebar -->
                <Border Grid.Column="2" Stroke="#B8935E" StrokeThickness="3" StrokeShape="RoundRectangle 18" BackgroundColor="#F6E7C6" StyleClass="panel">
                    <Border.Shadow>
                        <Shadow Opacity="0.35" Radius="16" Offset="0,6" />
                    </Border.Shadow>

                    <VerticalStackLayout Padding="14" Spacing="12">
                        <Label Text="Ð˜Ð³Ñ€Ð¾ÐºÐ¸" StyleClass="h2" />

                        <CollectionView x:Name="PlayersView" HeightRequest="240">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Border Stroke="#B8935E" StrokeThickness="2" StrokeShape="RoundRectangle 14" BackgroundColor="#F9EFD6" Padding="10" Margin="0,0,0,6">
                                        <Label Text="{Binding .}" TextColor="#2B1B12" FontAttributes="Bold" />
                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>

                        <Border Stroke="#B8935E" StrokeThickness="2" StrokeShape="RoundRectangle 16" BackgroundColor="#F9EFD6" Padding="12">
                            <VerticalStackLayout Spacing="8">
                                <Label Text="ÐšÑƒÐ±Ð¸Ðº" StyleClass="h2" />

                                <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12" VerticalOptions="Center">
                                    <Border x:Name="DiceBox" Stroke="#B8935E" StrokeThickness="2" StrokeShape="RoundRectangle 16" BackgroundColor="#FFFFFF" WidthRequest="74" HeightRequest="74">
                                        <Label x:Name="DiceFace" Text="?" FontSize="28" FontAttributes="Bold" TextColor="#2B1B12" HorizontalOptions="Center" VerticalOptions="Center" />
                                    </Border>

                                    <VerticalStackLayout Grid.Column="1" Spacing="6">
                                        <Button x:Name="RollButton" Text="Ð‘Ð ÐžÐ¡Ð˜Ð¢Ð¬" StyleClass="primary" />
                                        <Label x:Name="HintLabel" Text="Ð¥Ð¾Ð´Ð¸Ñ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð¸Ð³Ñ€Ð¾Ðº." StyleClass="small-muted" />
                                    </VerticalStackLayout>
                                </Grid>

                                <Label x:Name="LogLabel" Text="" StyleClass="small-muted" />
                            </VerticalStackLayout>
                        </Border>

                        <Border Stroke="#B8935E" StrokeThickness="2" StrokeShape="RoundRectangle 16" BackgroundColor="#E8C98A" Padding="12">
                            <Label Text="ðŸ· ÐŸÑƒÑ…Ð»Ñ: Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÑŒ â€” Ð´Ð¾Ð¹Ñ‚Ð¸ Ð´Ð¾ 30 Ð¸ Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ ÐŸÑƒÑ…Ð»ÑŽ. Ð¡ ÐŸÑƒÑ…Ð»ÐµÐ¹ Ð·Ð° Ñ…Ð¾Ð´ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 3 ÐºÐ»ÐµÑ‚ÐºÐ¸." TextColor="#2B1B12" FontAttributes="Bold" />
                        </Border>
                    </VerticalStackLayout>
                </Border>

            </Grid>
        </Grid>
    </Grid>
</ContentPage>
